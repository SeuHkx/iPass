<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
	<meta name="format-detection" content="telephone=no"/>
	<link rel="apple-touch-startup-image" href="startup.png"/>
	<link rel="apple-touch-icon" href="iphon_tetris_icon.png"/>
	<style>
		#canvas{
			background: cornflowerblue;
		}
	</style>
</head>
<body>
 <canvas id="canvas"></canvas>
 <div id="test" style="background: chocolate;margin-bottom: 50px" >2
 	<div style="background: cadetblue;margin-top: 30px;height: 50px" id="test1">1</div>
	 <div style="background: cadetblue;margin-top: 30px;height: 50px" id="test2">3</div>
 </div>
<script>
	(function(){
		window.onload = function(){


			var test = document.getElementById('test'),
				test2 = document.getElementById('test2'),
				test1 = document.getElementById('test1');

			test1.addEventListener('click',function(){
				alert('1');
			},false);
			test.addEventListener('click',function(){
				alert('2');
			},false);
			test2.addEventListener('click',function(){
				alert('3');
			},false);




			var canvas = document.getElementById('canvas'),
					context = canvas.getContext('2d'),
					pointData = {
						dataImg : null
					}
					,
					saveDraw = function() {
						pointData.dataImg = context.getImageData(0, 0,canvas.width, canvas.height);
					},
					restrorDraw = function() {
						context.putImageData(pointData.dataImg, 0, 0);
					},
					drawRubberbandShape = function(x1,y1,x,y) {
						context.lineWidth = 2;
						context.beginPath();
						context.moveTo(x1, 152);
						context.lineTo(x - canvas.getBoundingClientRect().left, y - canvas.getBoundingClientRect().top);
//                    context.lineTo(132 - pointData.canvasX + pointData.HEIGHT,249 - pointData.canvasY + pointData.WIDTH);
//                    context.lineTo(224 - pointData.canvasX + pointData.HEIGHT,346 - pointData.canvasY + pointData.WIDTH);
//                    context.lineTo(224 - pointData.canvasX + pointData.HEIGHT,152 - pointData.canvasY + pointData.WIDTH);
						context.stroke();
					},
			drawRubberbandShape1 = function(x1,y1,x,y) {
				context.lineWidth = 2;
				context.beginPath();
				context.moveTo(x1, 152);
				context.lineTo(x - canvas.getBoundingClientRect().left, y - canvas.getBoundingClientRect().top);
//                    context.lineTo(132 - pointData.canvasX + pointData.HEIGHT,249 - pointData.canvasY + pointData.WIDTH);
//                    context.lineTo(224 - pointData.canvasX + pointData.HEIGHT,346 - pointData.canvasY + pointData.WIDTH);
//                    context.lineTo(224 - pointData.canvasX + pointData.HEIGHT,152 - pointData.canvasY + pointData.WIDTH);
				context.stroke();
			};
			document.addEventListener('touchstart',function(){
				saveDraw();
			},false);
			document.addEventListener('touchmove',function(event){
				restrorDraw();
				drawRubberbandShape(40,152,event.changedTouches[0].clientX,event.changedTouches[0].clientY);
//				if(event.changedTouches[0].clientX == 48){
//					drawRubberbandShape1(48,117,event.changedTouches[0].clientX,event.changedTouches[0].clientY);
//				}
				context.lineWidth = 2;
				context.beginPath();
				context.moveTo(12, 152);
				context.lineTo(56, 90);
//                    context.lineTo(132 - pointData.canvasX + pointData.HEIGHT,249 - pointData.canvasY + pointData.WIDTH);
//                    context.lineTo(224 - pointData.canvasX + pointData.HEIGHT,346 - pointData.canvasY + pointData.WIDTH);
//                    context.lineTo(224 - pointData.canvasX + pointData.HEIGHT,152 - pointData.canvasY + pointData.WIDTH);
				context.stroke();

				switch (event.changedTouches[0].clientX){
					case 0 :
						var test = document.getElementById('test');
							test.style.backgroundColor = 'red';
							test.addEventListener('touchmove',function(){
								alert('a');
							},false);
						drawRubberbandShape1(48,117,event.changedTouches[0].clientX,event.changedTouches[0].clientY);
						break;
				}
				console.log(event.changedTouches[0].clientX + " : " + event.changedTouches[0].clientY)
			},false);
		}

	}())
</script>
</body>
</html>